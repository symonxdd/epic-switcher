/* ---- List Item ---- */
/* ---- Row Wrapper (contains List Item + External Badge) ---- */
.rowWrapper {
  display: contents;
}

/* ---- List Item ---- */
.listItem {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  border-radius: 18px;
  transition: all 0.2s ease;
  position: relative;
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  overflow: hidden;
  cursor: default;
  /* Grid placement */
  width: 100%;
  /* Stretch to fill the max-content column */
}

/* Ensure content is above pseudo-elements */
.listItem > * {
  position: relative;
  z-index: 2;
}

/* ---- Avatar ---- */
.avatarWrapper {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.avatar {
  background: var(--avatar-gradient);
  color: var(--text-primary);
  font-weight: 600;
  font-size: 0.9rem;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  user-select: none;
  overflow: hidden;
  padding: 2px;
  transition: all 0.2s ease;
}

.avatarNoBorder {
  padding: 0;
}

/* ---- Active Badge ---- */
.activeBadge {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(59, 130, 246, 0.15));
  border: 1px solid rgba(168, 85, 247, 0.3);
  border-radius: 24px;
  color: #a855f7;
  font-size: 0.85rem;
  font-weight: 600;
  flex-shrink: 0;
}

.activeBadge svg {
  font-size: 1.1rem;
}

/* ---- External Active Badge (ported from Accounts page) ---- */
.activeAccountBadge {
  /* Vertically center in the grid row */
  display: flex;
  align-items: center;
  margin-left: 20px;
  /* Use row-reverse to keep the icon anchored on the right visually and physically */
  flex-direction: row-reverse;
  justify-content: flex-start;
  /* With row-reverse, start is the right side */
  /* Keep icon on the right side */
  gap: 0;
  min-width: 32px;
  max-width: 32px;
  height: 32px;
  padding: 0 7px;
  /* Enough room for 1.1rem icon (~17.6px) in 32px width */
  background-color: #222;
  border: 1px solid #444;
  border-radius: 20px;
  color: #fff;
  font-size: 0.75rem;
  font-weight: 700;
  flex-shrink: 0;

  /* Refined smooth transitions without padding shift */
  transition:
    max-width 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    background-color 0.3s ease,
    box-shadow 0.3s ease;

  z-index: 10;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  line-height: 1;
  cursor: default;
  overflow: hidden;
  white-space: nowrap;

  /* Anchor to the right to expand leftwards smoothly */
  transform-origin: right center;
  will-change: max-width;
  backface-visibility: hidden;
}

.activeAccountBadge:hover {
  max-width: 165px;
  /* Compact and stable expansion */
  background-color: #2a2a2a;
}

.activeAccountBadge span {
  opacity: 0;
  display: flex;
  align-items: center;
  margin-top: -1px;
  transition: opacity 0.4s ease, margin-right 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  white-space: nowrap;
  flex-shrink: 0;
}

.activeAccountBadge:hover span {
  margin-right: 8px;
  opacity: 1;
}

/* Dark mode specific overrides for the badge if needed, assuming global dark mode class is handled elsewhere or via media query.
   However, since AccountRow might not be under a .dark class directly but relies on variables, we can stick to variables or specific colors.
   The user asked to match Accounts page exactly. Accounts page uses explicit colors in its CSS.
*/
:global([data-theme="dark"]) .activeAccountBadge {
  background-color: #eee;
  color: #111;
  border-color: #fff;
}

:global([data-theme="dark"]) .activeAccountBadge:hover {
  background-color: #fff;
}

.activeAccountBadge svg {
  font-size: 1.1rem;
  flex-shrink: 0;
  transform: translateY(-1px);
  /* Nudge up for perfect visual centering */
}

.avatarNoBorder:has(img) {
  background: none !important;
}

.customAvatarImage {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

/* ---- Text ---- */
.textBlock {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0px;
  /* Reduced from 4px */
  overflow: hidden;
  min-width: 0;
}

.inlineRow {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
}

.displayName {
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  user-select: text;
  -webkit-user-select: text;
  cursor: text;
}

.metaLine {
  font-size: 0.7rem;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  user-select: text;
  -webkit-user-select: text;
  cursor: text;
}

/* ---- Actions ---- */
.actionsWrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  position: relative;
  flex-shrink: 0;
}

/* ---- Icon Buttons ---- */
.iconButton {
  background: color-mix(in srgb, var(--text-secondary) 8%, transparent);
  border: 1px solid color-mix(in srgb, var(--text-secondary) 15%, transparent);
  color: var(--text-secondary);
  border-radius: 999px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  font-size: 1.15rem;
  padding: 8px;
  min-width: 36px;
  min-height: 36px;
}

/* Specific style for Edit Alias button (text + icon) */
.editAliasButton {
  background: color-mix(in srgb, var(--text-secondary) 8%, transparent);
  border: 1px solid color-mix(in srgb, var(--text-secondary) 15%, transparent);
  color: var(--text-secondary);
  border-radius: 999px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  /* space between icon and text */
  padding: 8px 16px;
  min-height: 36px;
  font-size: 0.85rem;
  font-weight: 500;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.editAliasButton:hover {
  background: color-mix(in srgb, var(--text-secondary) 15%, transparent);
  border-color: color-mix(in srgb, var(--text-secondary) 25%, transparent);
  color: var(--text-primary);
}

.editAliasButton:active {
  transform: scale(0.95);
}

.editAliasButton svg {
  font-size: 1.15rem;
}

.iconButton:hover {
  background: color-mix(in srgb, var(--text-secondary) 15%, transparent);
  border-color: color-mix(in srgb, var(--text-secondary) 25%, transparent);
  color: var(--text-primary);
}

.iconButton:active {
  transform: scale(0.95);
}

/* ---- Alias Badge ---- */
.iconButton.hasAlias {
  position: relative;
}

.iconButton.hasAlias::after {
  content: "";
  position: absolute;
  top: -6px;
  right: -7px;
  width: 8px;
  height: 8px;
  background-color: var(--color-accent-red);
  border-radius: 50%;
  border: 2px solid var(--bg-card);
  box-sizing: content-box;
}

/* ---- Alias Input ---- */
.aliasInputContainer {
  position: absolute;
  top: 50%;
  right: 80px;
  transform: translateY(-50%);
  z-index: 9999;
  padding: 10px 12px;
  border-radius: 12px;
  background: var(--bg-surface);
  border: 1px solid var(--border-subtle);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18), 0 2px 8px rgba(0, 0, 0, 0.12);
  animation: slideIn 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-50%) scale(0.95);
  }

  to {
    opacity: 1;
    transform: translateY(-50%) scale(1);
  }
}

/* ---- Animations ---- */
@keyframes gradientShift {
  0% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }

  100% {
    background-position: 0% 50%;
  }
}